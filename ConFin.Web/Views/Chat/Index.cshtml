@using System.Web.Optimization

@{
    ViewBag.Title = "Chat Básico";
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
}
<label for="apelido">Seu Apelido:</label><input type="text" name="apelido" id="apelido" /><br />
<label for="mensagem">Mensagem:</label><input type="text" name="mensagem" id="mensagem" maxlength="100" />
<div id="chatWindow" style="width: 100%; height: 300px; overflow: scroll; border: 1px solid grey"></div>


<script src="/signalr/hubs" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        var chat = $.connection.chat;
        chat.client.publicarMensagem = function (apelido, msg) {
            alert("o apelido foi " + apelido);

            var chatWin = $("#chatWindow");
            chatWin.html(chatWin.html() + "<b>" + apelido + "</b>: " + msg + "<br />");
        };

        chat.client.naoExecutaNada = function (apelido) {
            alert("o apelido foi " + apelido);
        }

        $.connection.hub.start().done(function () {
            $.connection.hub.start();
            $(document).keypress(function (e) {
                if (e.which == 13) {
                    chat.server.enviarMensagem($("#apelido").val(), $("#mensagem").val());
                    $("#mensagem").val("");
                }
            });
        });


       
    });
</script>
